# Глоссарий

Этот глоссарий определяет ключевые термины и концепции, используемые в документации и приложении RuleDesk.

## Основные концепции

### Booru

Тип имиджборда, который позволяет пользователям публиковать, помечать тегами и организовывать изображения. Booru-сайты обычно используют систему категоризации контента на основе тегов.

**Примеры:** Rule34.xxx, Gelbooru, Danbooru

**Связанное:** [Provider Pattern](./architecture.md#provider-pattern-architecture)

---

### Tags

Ключевые слова или метки, используемые для категоризации и поиска публикаций. Tags описывают различные атрибуты контента, такие как персонажи, авторы, тип контента, рейтинг и т. д.

**Использование в RuleDesk:**

- Tags хранятся как строки, разделенные пробелами, в базе данных
- Tags используются для фильтрации и поиска публикаций
- Нормализация Tags автоматически удаляет метаданные (например, "tag (123)" → "tag")

**Связанное:** [Схема базы данных - Публикации](./database.md#table-posts), [Нормализация тегов](./roadmap.md#data-integrity--sync)

---

### Рейтинг

Система классификации рейтинга контента, используемая booru-сайтами для категоризации публикаций по типу контента:

- **Safe (s):** Безопасный для работы контент
- **Questionable (q):** Контент сомнительного характера
- **Explicit (e):** Откровенный/NSFW контент

**Связанное:** [Схема базы данных - Публикации](./database.md#table-posts), [Фильтры](./roadmap.md#a-filters-advanced-search-priority-high--ui-ready-backend-pending)

---

### Синхронизация

Процесс получения новых публикаций из booru API и обновления локальной базы данных. RuleDesk реализует интеллектуальную синхронизацию с ограничением частоты запросов и инкрементными обновлениями.

**Возможности:**

- Ограничение частоты запросов (задержка 1.5с между авторами, 0.5с между страницами)
- Инкрементная синхронизация (получает только публикации новее `lastPostId`)
- Фоновое выполнение с отслеживанием прогресса
- Экспоненциальная отсрочка для обработки ошибок

**Связанное:** [Служба синхронизации](./architecture.md#sync-service), [Поток синхронизации](./architecture.md#synchronization-flow), [Настройки синхронизации](./README.md#sync--background)

---

### Cache

Локальное хранилище метаданных публикаций и изображений предварительного просмотра для обеспечения офлайн-просмотра и быстрой фильтрации. RuleDesk использует 3-слойную систему прогрессивной загрузки изображений.

**Уровни Cache:**

1.  **Preview URL** - Размытое превью низкого разрешения (мгновенный показ)
2.  **Sample URL** - Сэмпл среднего разрешения (загружается в галерее)
3.  **File URL** - Оригинал полного разрешения (загружается только в просмотрщике)

**Связанное:** [Прогрессивная загрузка изображений](./README.md#progressive-image-loading), [Хранение и Cache](./README.md#storage--cache)

---

### Blacklist

Список tags или контента, который должен быть исключен из результатов поиска или лент. В настоящее время не реализован в RuleDesk, но планируется для будущих выпусков.

**Связанное:** [Дорожная карта - Фильтры](./roadmap.md#a-filters-advanced-search-priority-high--ui-ready-backend-pending)

---

### Отслеживание авторов

Процесс мониторинга конкретных авторов или загрузчиков на предмет новых публикаций. RuleDesk поддерживает отслеживание по:

-   **Tag:** Отслеживание публикаций, помеченных определенным Tag
-   **Uploader:** Отслеживание публикаций, загруженных определенным пользователем
-   **Query:** Отслеживание публикаций, соответствующих пользовательскому запросу

**Связанное:** [Схема базы данных - Авторы](./database.md#table-artists), [Отслеживание авторов](./README.md#-artist-tracking)

---

### Provider Pattern

Абстрактный слой, который позволяет RuleDesk поддерживать несколько booru-источников без изменений в основной базе данных. Каждый провайдер реализует интерфейс `IBooruProvider`.

**Текущие провайдеры:**

-   Rule34.xxx (`Rule34Provider`)
-   Gelbooru (`GelbooruProvider`)

**Связанное:** [Архитектура - Provider Pattern](./architecture.md#provider-pattern-architecture), [Поддержка нескольких Booru](./README.md#-multi-source-ready)

---

## Технические термины

### IPC (Inter-Process Communication)

Механизм связи между Main Process и Renderer Process Electron. RuleDesk использует IPC-архитектуру на основе контроллеров с типобезопасными интерфейсами.

**Связанное:** [Архитектура IPC](./api.md#architecture), [Интерфейс IPC Bridge](./api.md#ipc-bridge-interface)

---

### Main Process

Безопасная среда Node.js в Electron, которая обрабатывает весь ввод/вывод, персистентность и секреты. Операции с базой данных, вызовы API и доступ к файловой системе выполняются в Main Process.

**Связанное:** [Архитектура - Main Process](./architecture.md#main-process-the-brain)

---

### Renderer Process

Изолированная среда браузера в Electron, которая занимается рендерингом UI и взаимодействием с пользователем. Renderer Process обменивается данными с Main Process через IPC.

**Связанное:** [Архитектура - Renderer Process](./architecture.md#renderer-process-the-face)

---

### Изоляция контекста

Функция безопасности в Electron, которая предотвращает прямой доступ Renderer Process к API Node.js. Все коммуникации должны проходить через IPC-мост.

**Статус:** ✅ Включено в RuleDesk

**Связанное:** [Архитектура безопасности](./architecture.md#security-architecture), [Изоляция контекста](./architecture.md#context-isolation)

---

### Drizzle ORM

Библиотека объектно-реляционного отображения, используемая RuleDesk для типобезопасных запросов к базе данных. Drizzle предоставляет вывод типов TypeScript и генерацию SQL.

**Связанное:** [Архитектура базы данных](./database.md#database-architecture), [Drizzle ORM](./database.md#drizzle-orm)

---

### Режим WAL (Write-Ahead Logging)

Режим SQLite, который позволяет одновременное чтение во время выполнения записи. RuleDesk использует режим WAL для оптимальной производительности.

**Связанное:** [Архитектура базы данных](./database.md#database-architecture), [Режим WAL](./database.md#database-architecture)

---

### Безопасное хранилище

API `safeStorage` Electron, используемый для шифрования конфиденциальных данных (ключей API) в состоянии покоя. Шифрование использует цепочки ключей платформы (Windows Credential Manager, macOS Keychain, Linux libsecret).

**Связанное:** [Безопасность - Поток безопасности учетных данных](./architecture.md#credential-security-flow), [Безопасное хранилище](./README.md#security)

---

### Прогрессивная загрузка изображений

3-слойная стратегия загрузки изображений, которая обеспечивает мгновенную визуальную обратную связь с плавным улучшением качества:

1.  **Превью** - Размытое превью низкого разрешения (мгновенно)
2.  **Сэмпл** - Сэмпл среднего разрешения (галерея)
3.  **Оригинал** - Оригинал полного разрешения (только просмотрщик)

**Связанное:** [Прогрессивная загрузка изображений](./README.md#progressive-image-loading), [Cache](#cache)

---

## Термины UI/UX

### Галерея

Сетчатое представление публикаций с изображениями предварительного просмотра, рейтингами и метаданными. RuleDesk поддерживает несколько видов галереи:

-   **Grid View** - Карточная сетка
-   **List View** - Компактный список
-   **Masonry View** - Макет в стиле Pinterest (планируется)

**Связанное:** [Галерея авторов](./README.md#-artist-gallery), [Карточки галереи](./README.md#gallery-cards)

---

### Просмотрщик

Полноэкранный иммерсивный просмотрщик для просмотра публикаций с помощью горячих клавиш, элементов управления загрузкой и управления Tags.

**Возможности:**

-   Автоматическое скрытие элементов управления
-   Навигация с клавиатуры (←/→)
-   Загрузка и избранное
-   Панель Tags

**Связанное:** [Опыт просмотра](./README.md#viewer-experience), [Полноэкранный просмотрщик](./README.md#-full-screen-viewer)

---

### Избранное

Система для отметки и управления избранными публикациями. Избранное хранится локально в базе данных и может быть переключено через UI или горячую клавишу (`F`).

**Связанное:** [Система избранного](./README.md#-favorites-system), [Схема базы данных - Публикации](./database.md#table-posts)

---

### Подписки

Подписки на основе Tags для отслеживания определенных комбинаций Tags. В настоящее время планируются, но еще не реализованы.

**Связанное:** [Дорожная карта - Подписки](./roadmap.md#-subscriptions--updates)

---

### Плейлисты / Коллекции

Курируемые коллекции публикаций, независимые от авторов/трекеров. В настоящее время планируются, но еще не реализованы.

**Связанное:** [Дорожная карта - Плейлисты](./roadmap.md#c-playlists--collections-priority-medium--not-started)

---

## Термины базы данных

### Миграция

Скрипт, который изменяет схему базы данных. RuleDesk использует Drizzle Kit для автоматической генерации и выполнения миграций.

**Связанное:** [Миграции](./database.md#migrations), [Разработка - Скрипты базы данных](./development.md#database-scripts)

---

### Резервное копирование / Восстановление

Функциональность ручного резервного копирования и восстановления базы данных. Резервные копии имеют отметку времени и хранятся в каталоге пользовательских данных.

**Связанное:** [Резервное копирование и восстановление](./database.md#backup-and-recovery), [Резервное копирование и восстановление](./README.md#-backup--restore)

---

### Проверка целостности

Операция SQLite (`PRAGMA integrity_check`), которая проверяет целостность файла базы данных. RuleDesk выполняет проверки целостности перед операциями восстановления.

**Связанное:** [Резервное копирование и восстановление](./database.md#backup-and-recovery)

---

## Термины API

### Ключ API

Учетные данные для аутентификации, необходимые для доступа к booru API. RuleDesk хранит ключи API зашифрованными в состоянии покоя с использованием API `safeStorage` Electron.

**Связанное:** [Аутентификация API](./README.md#-api-authentication), [Безопасное хранилище](#secure-storage)

---

### Ограничение частоты запросов

Механизм предотвращения злоупотребления API путем ограничения частоты запросов. RuleDesk реализует интеллектуальное ограничение частоты запросов с настраиваемыми задержками.

**Текущие лимиты:**

-   Задержка 1.5с между авторами
-   Задержка 0.5с между страницами

**Связанное:** [Служба синхронизации](./architecture.md#sync-service), [Ограничение частоты запросов](./api.md#external-api-integration)

---

### Экспоненциальная отсрочка

Стратегия обработки ошибок, которая увеличивает время ожидания между повторными попытками. RuleDesk использует экспоненциальную отсрочку для обработки ошибок API.

**Связанное:** [Служба синхронизации](./architecture.md#sync-service), [Лучшие практики](./rule34-api-reference.md#rate-limiting)

---

## См. также

-   [Индекс документации](./index.md) - Полная навигация по документации
-   [Обзор архитектуры](./architecture.md) - Архитектура и дизайн системы
-   [Справочник по API](./api.md) - Документация по IPC API
-   [Документация по базе данных](./database.md) - Схема и операции с базой данных